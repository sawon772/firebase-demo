<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Realtime Chat App</title>
<style>
  body { font-family: Arial; background: #f7f7f7; padding: 20px; }
  h2 { text-align: center; }
  #chatBox { background: white; padding: 10px; border-radius: 10px; height: 300px; overflow-y: scroll; }
  .msg { margin: 8px 0; padding: 6px 10px; border-radius: 5px; background: #e3f2fd; }
  input { width: 80%; padding: 8px; border: 1px solid #ccc; border-radius: 5px; }
  button { padding: 8px 10px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }
</style>
</head>
<body>

<h2>💬 Realtime Chat App</h2>
<div id="chatBox"></div>
<br>
<input type="text" id="msgInput" placeholder="Type your message...">
<button id="sendBtn">Send</button>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
  import { getDatabase, ref, push, onChildAdded } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBubSXHDTAEMSpaywiCQAkTrOPz3tijtZ0",
    authDomain: "fir-849f2.firebaseapp.com",
    databaseURL: "https://fir-849f2-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "fir-849f2",
    storageBucket: "fir-849f2.firebasestorage.app",
    messagingSenderId: "695376931417",
    appId: "1:695376931417:web:b108541a5a7b216cc31f48",
    measurementId: "G-EV67721B67"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  const msgInput = document.getElementById("msgInput");
  const sendBtn = document.getElementById("sendBtn");
  const chatBox = document.getElementById("chatBox");

  // 📩 মেসেজ পাঠানো
  sendBtn.addEventListener("click", () => {
    const text = msgInput.value.trim();
    if (text !== "") {
      push(ref(db, "messages"), {
        text: text,
        time: new Date().toLocaleTimeString()
      });
      msgInput.value = "";
    }
  });

  // 💬 নতুন মেসেজ আসলেই দেখানো
  onChildAdded(ref(db, "messages"), (snapshot) => {
    const data = snapshot.val();
    const div = document.createElement("div");
    div.className = "msg";
    div.textContent = `[${data.time}] ${data.text}`;
    chatBox.appendChild(div);
    chatBox.scrollTop = chatBox.scrollHeight;
  });
</script>
</body>
</html>
